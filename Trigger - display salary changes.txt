SET SERVEROUTPUT ON;

CREATE TABLE EMP (ID NUMBER PRIMARY KEY, NAME VARCHAR2(40), SAL NUMBER);

INSERT INTO EMP VALUES(1,'ABC',500);
INSERT INTO EMP VALUES(2,'PQR',550);
INSERT INTO EMP VALUES(3,'XYZ',600);

SELECT * FROM EMP;

CREATE OR REPLACE TRIGGER display_salary_changes
	BEFORE UPDATE ON EMP 
	FOR EACH ROW 
	WHEN (NEW.ID > 0) 
DECLARE 
	sal_diff number;
BEGIN 
	sal_diff := :NEW.SAL  - :OLD.SAL; 
	dbms_output.put_line('Old salary: ' || :OLD.SAL); 
	dbms_output.put_line('New salary: ' || :NEW.SAL); 
	dbms_output.put_line('Salary difference: ' || sal_diff); 
END;
/

UPDATE EMP SET SAL=490 WHERE ID = 1;

CREATE OR REPLACE TRIGGER LOW_2_UP
	BEFORE UPDATE OR INSERT ON EMP
	FOR EACH ROW
	WHEN (NEW.ID > 0)
BEGIN
	:NEW.NAME := UPPER(:NEW.NAME);
END;
/

UPDATE EMP SET SAL=550 WHERE ID = 4;
INSERT INTO EMP VALUES(50,'asd',900);
SELECT * FROM EMP;

COMMIT;
